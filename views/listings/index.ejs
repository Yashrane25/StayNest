<% layout("/layouts/boilerplate.ejs") %>
<body>
  <!-- <h3>All Listings</h3> -->
  <div
    class="listings-header text-center my-2"
    style="
      font-family: 'Quicksand', sans-serif;
      font-size: 2.8rem;
      color: #0d2f6e;
      letter-spacing: 0.5px;
    "
  >
    <h1
      style="
        font-weight: 700;
        font-size: 2rem;
        color: #0b3d91;
        letter-spacing: 0px;
      "
    >
      Find Your Perfect Stay
    </h1>
    <p style="font-size: 0.8rem; color: #5b6d91; margin-top: 0.5rem">
      Find apartments and villas that match your preferences
    </p>
  </div>

  <div class="container">
    <div
      class="row row-cols-1 row-cols-sm-1 row-cols-md-2 row-cols-lg-4 gx-4 gy-0 my-5"
    >
      <% for(let listing of allListings) { %>
      <a href="/listings/<%=listing._id%>" class="listing-card">
        <div class="col mb-0">
          <div class="card" style="height: 18rem">
            <div style="height: 70%; overflow: hidden">
              <img
                src="<%= listing.images.length ? listing.images[0].url : '/images/default.jpg' %>"
                class="card-img-top"
                alt="Image"
                style="width: 100%; height: 100%; object-fit: cover"
              />
              <div class="card-img-overlay"></div>
            </div>
            <div class="card-body" style="height: 20%; overflow: hidden">
              <p class="card-text mb-0">
                <b><%= listing.title %></b><br />
                <span class="index-price">
                  &#8377; <%=listing.price.toLocaleString("en-IN")%> per month
                </span>
              </p>
            </div>
          </div>
        </div>
      </a>
      <% } %>
    </div>
  </div>
</body>
